{"version":3,"sources":["../../../lib/connections/slack/index.js"],"names":[],"mappings":";;;;;;;;wBAAoB,UAAU;;;;sBACX,cAAc;;;;sBACH,UAAU;;;;oBACZ,QAAQ;;;;qBAErB;AACb,OAAK,EAAA,iBAAG;AACN,QAAI,KAAK,GAAG,oBAAO,KAAK,CAAC,KAAK;QAC1B,WAAW,GAAG,EAAE,CAAA;;AAEpB,SAAK,IAAI,QAAQ,IAAI,KAAK,EAAE;AAC1B,UAAI,CAAC,CAAA,GAAE,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,EAAE,QAAQ,CAAC,EAAE,SAAS;;AAEvD,UAAI,IAAI,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAA;AAC1B,iBAAW,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAA;KAC3C;;AAED,WAAO,sBAAQ,GAAG,CAAC,WAAW,CAAC,CAAA;GAChC;;AAED,eAAa,EAAA,uBAAC,IAAI,EAA8D;QAA5D,UAAU;QAAkB,YAAY;;AAC1D,WAAO,IAAI,UAAU,CAAC,EAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAC,CAAC,CACvC,GAAG,CAAC,WAAW,CAAC,CAChB,IAAI,CAAC,UAAA,IAAI;aAAI,IAAI,YAAY,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,OAAO,EAAE;KAAA,CAAC,CAAA;GAC5D;CACF","file":"index.js","sourcesContent":["import Promise from 'bluebird'\nimport Config from '../../config'\nimport SlackSocketClient from './socket'\nimport SlackHttpClient from './http'\n\nexport default {\n  start() {\n    let slack = Config.types.slack,\n        connections = []\n\n    for (let teamName in slack) {\n      if (!{}.hasOwnProperty.call(slack, teamName)) continue;\n\n      let team = slack[teamName]\n      connections.push(this.newConnection(team))\n    }\n\n    return Promise.all(connections)\n  },\n\n  newConnection(team, HttpClient=SlackHttpClient, SocketClient=SlackSocketClient) {\n    return new HttpClient({token: team.token})\n      .get('rtm.start')\n      .then(body => new SocketClient(body.url, team).connect())\n  }\n}\n"]}