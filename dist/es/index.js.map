{"version":3,"sources":["../../lib/es/index.js"],"names":[],"mappings":";;;;;;;;wBAAoB,UAAU;;;;oBACb,MAAM;;;;6BACG,eAAe;;;;sBACtB,WAAW;;;;AAE9B,IAAM,EAAE,2BAAG;;AAWT,QAAM,EAAA,kBAAa;;;QAAZ,OAAO,yDAAC,EAAE;;AACf,WAAO,sBAAQ,OAAO,CAAC,IAAI,2BAAc,MAAM,CAAC,kBAAK,eAAe,CAAC;AACnE,WAAK,EAAE,CACL;AACE,YAAI,EAAE,WAAW;AACjB,YAAI,EAAE,MAAM;OACb,CACF;AACD,SAAG,EAAE;AACH,YAAI,EAAE,MAAM;AACZ,aAAK,EAAE,OAAO;AACd,YAAI,EAAE,oBAAO,SAAS;AACtB,oBAAY,EAAE,IAAI;AAClB,qBAAa,EAAE,KAAK;AACpB,8BAAsB,EAAE,IAAI;AAC5B,kBAAU,EAAE,EAAE;AACd,0BAAkB,EAAE,IAAI;OACzB;AACD,WAAK,EAAE;eAAM,sBAAQ,KAAK,EAAE;OAAA;AAC5B,gBAAU,EAAE,KAAK;KAClB,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,UAAA,MAAM,EAAI;AAC3B,YAAK,MAAM,GAAG,MAAM,CAAA;AACpB,aAAO,MAAM,CAAA;KACd,CAAC,CAAA;GACH;CACF;AA9BK,QAAM;SAJA,aAAC,MAAM,EAAE;AACjB,UAAI,CAAC,OAAO,GAAG,MAAM,CAAA;KACtB;SAES,eAAG;AACX,UAAI,IAAI,CAAC,OAAO,EAAE,OAAO,IAAI,CAAC,OAAO,CAAA,KAChC,MAAM,KAAK,CAAC,8DAA8D,CAAC,CAAA;KACjF;;;;EA2BF,CAAA;;qBAEc,EAAE","file":"index.js","sourcesContent":["import Promise from 'bluebird'\nimport Hoek from 'hoek'\nimport ElasticSearch from 'elasticsearch'\nimport Config from '../config'\n\nconst Es = {\n\n  set client(client) {\n    this._client = client\n  },\n\n  get client() {\n    if (this._client) return this._client\n    else throw Error('You must call create before using a getter to get the client')\n  },\n\n  create(options={}) {\n    return Promise.resolve(new ElasticSearch.Client(Hoek.applyToDefaults({\n      hosts: [\n        {\n          host: 'localhost',\n          port: '9200'\n        }\n      ],\n      log: {\n        type: 'file',\n        level: 'trace',\n        path: Config.esLogPath, // TODO: handle environments, connection pool, winston, etc\n        sniffOnStart: true,\n        sniffInterval: 60000,\n        sniffOnConnectionFault: true,\n        maxSockets: 30,\n        suggestCompression: true\n      },\n      defer: () => Promise.defer(),\n      apiVersion: '1.7'\n    }, options))).then(client => {\n      this.client = client\n      return client\n    })\n  }\n}\n\nexport default Es\n"]}